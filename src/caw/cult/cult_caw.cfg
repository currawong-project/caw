{
  base_dir:    "/home/kevin/src/caw/src/caw/cult/io",
  io_dict:     "/home/kevin/src/caw/src/caw/cult/io.cfg"            // Runtime configuration file.
  proc_dict:   "/home/kevin/src/caw/src/libcw/flow/proc_dict.cfg", // Processor class definition file.
  udp_dict:    "/home/kevin/src/caw/src/libcw/flow/udp_dict.cfg",  // User defined proc files
  tracer: {  trace_cnt:1024, msg_cnt: 1024000, enable_fl:false, activate_fl:false, out_fname:"tracer" }
    
  programs: {


   ex_00_mod_sine: {

      //dur_limit_secs:30.0,  // Run the network for 5 seconds
      //non_real_time_fl: false,
      
      network: {

        procs: {
          lfo:   { class: sine_tone, args:{ hz:3, dc:440, gain:110 }}
          sh:    { class: sample_hold,            in:{ in:lfo.out } }
          osc:   { class: sine_tone, preset:mono, in:{ hz:sh.out } },
	  aout:  { class:audio_out, in:{ in:osc.out }, args:{ dev_label:"main"} }
	  //af:  { class: audio_file_out, in: { in:osc.out } args:{  fname:"$/out.wav"} }
        }
      }
    }

    // Play score through internal sampler
    ex_01_score_player: {

      network: {
      
        procs: {
	  player: { class:score_player, args:{ fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_2.csv" }, ui: { create_fl:true } },
	  
	  samp_vt:{ class: vel_table,  in:{ in:player.out }, args:{ vel_tbl_fname:"$/vel_table_perf.json", vel_tbl_label:"ivory" }},
	  
          vctl: { class: poly_voice_ctl, in:{ in:samp_vt.out }, args:{ voice_cnt:70, prune_thresh:35  } },

	  voice_poly: {
	    class: poly,
	    in: { count:vctl.voice_cnt }
	    args: { parallel_fl:false }

	    network: {
	      procs: {
	        voc: { class:piano_voice, in:{ _.in:_.vctl.out_ },
		                          out:{ _.done_fl:_.vctl.done_fl_ },
					  args:{ wtb_fname:"~/media/audio/wt6/wt_bank.json",
					  wtb_instr:"piano",
					  rls_coeff: 0.99,
					  rls_thresh:0.01 } },
					  
		//voc: { class:midi_voice, in:{_.in:_.vctl.out_ }, out:{ _.done_fl:_.vctl.done_fl_ }, args:{chCnt:2, gain:0.2 } },
	      }
	    }
	  }

	  amix: { class: audio_mix,   in:{ in_:voice_poly.voc_.out }     args:{ igain_:1.0 }},
	  aout: { class: audio_out,   in:{ in:amix.out }, args:{ dev_label:"main"}}
	  
        }
      }
    }

    // Simulate two pianos by routing the score MIDI to two different MIDI output ports
    ex_02_score_player: {

      network: {
      
        procs: {
	  player: { class:score_player, args:{ fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_2.csv" }, ui: { create_fl:true } },

	  rr: { class:recd_route, in:{ in:player.out } args:{ out_cnt:2, sel_field:"piano_id"}  }

	  mout_a: { class: midi_out, in:{ rin:rr.out0 }, args:{ print_fl:true, "dev_label":"Fastlane", port_label:"Fastlane MIDI A" } },
	  mout_b: { class: midi_out, in:{ rin:rr.out1 }, args:{ print_fl:true, "dev_label":"Fastlane", port_label:"Fastlane MIDI B" } },
	  

        }
      }
    }



    // Trigger Spirio playback from the score
    ex_03_score_player: {
      network: {
        procs: {

	  player: { class:score_player, args:{ fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_2.csv" }, ui: { create_fl:true } },

	  sf: { class:score_follower_2, in:{ in:player.out }, args:{ b_loc:0, e_loc:2462, score_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_2.csv"}, ui: { create_fl:true } }

	  mout_a: { class: midi_out, in:{ rin:player.out } args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 1" }}

	  spirio_ctl: { class: score_player_ctl, in:{ in:sf.out }, args:{ cfg_fname:"$/spirio_ctl.cfg" } }

	  print: { class:print, in:{ in0:spirio_ctl.beg_loc, in1:spc.end_loc, eol_fl:spc.end_loc } args:{text:["beg","end",""]}}

	  spirio_ply: { class:score_player, in:{ b_loc:spirio_ctl.beg_loc, e_loc:spirio_ctl.end_loc, start:spirio_ctl.end_loc },
	                                  args:{ fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_2.csv" },
					    ui: { create_fl:true } },

	  mout_b: { class: midi_out, in:{ rin:spirio_ply.out } args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 2" }}

	}
      } 
    }

    ex_04_rt: {
      network: {
        procs: {


	  midi_a: { class:midi_in,  args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 1"} },
	  midi_b: { class:midi_in,  args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 2"} },

	  rr_a: { class:recd_route, in:{ in:midi_a.r_out }, args:{ out_cnt:2, select:0, sel_field:"" }  },
	  rr_b: { class:recd_route, in:{ in:midi_b.r_out }, args:{ out_cnt:2, select:0, sel_field:"" }  },

	  rr_merge: { class:recd_merge, in:{ in0:rr_a.out0, in1:rr_b.out0 } },

	  sf: { class:score_follower_2, in: { in:rr_merge.out },
	                              args: { b_loc:0, e_loc:2462, score_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_2.csv"},
				        ui: { create_fl:true } }

	
	}
      } 
    }

    ex_05_rt: {
      network: {
        procs: {


	  midi_a: { class:midi_in,  args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 1"} },
	  midi_b: { class:midi_in,  args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 2"} },

	  // switch MIDI off from a particular piano by routing messages to rr_a/b.out0
	  rr_a: { class:recd_route, in:{ in:midi_a.r_out }, args:{ out_cnt:2, select:1, sel_field:"" }  },
	  rr_b: { class:recd_route, in:{ in:midi_b.r_out }, args:{ out_cnt:2, select:1, sel_field:"" }  },

	  sf_a: { class:score_follower_2, in: { in:rr_a.out1 },
	                                args: { score_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_3.csv"},
				          ui: { create_fl:true } }

	  sf_b: { class:score_follower_2, in: { in:rr_b.out1 },
	                                args: { score_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_3.csv"},
				          ui: { create_fl:true } }

	  sf: { class:recd_merge, in:{ in0:sf_a.out0, in1:sf_b.out0 } },


	  g_ctl: { class:gutim_ctl, in:{ in:sf.out },
	                           args:{ cfg_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/gutim_ctl.json" },
	                           out: { midi_ena_a:rr_a.select, midi_ena_b:rr_b.select
				          sf_a_beg_loc:sf_a.b_loc, sf_a_end_loc:sf_a.e_loc, sf_a_end_loc:sf_a.reset_trigger,
					  sf_b_beg_loc:sf_b.b_loc, sf_b_end_loc:sf_b.e_loc, sf_b_end_loc:sf_b.reset_trigger },
			            ui: { create_fl:true } } 
	
	  spirio_ply: { class:score_player, in: { b_loc:g_ctl.spirio_beg_loc, e_loc:g_ctl.spirio_end_loc, start:g_ctl.spirio_start_fl },
	                                  args: { fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_3.csv" },
	  				    ui: { create_fl:true } },

	  mout_b: { class: midi_out, in:{ rin:spirio_ply.out } args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 2" }}

	}
      } 
    }

    ex_06_label_val_test: {
      network: {
        procs:{
	  menu_a: { class:label_value_list,
	          args: { cfg:{"A":0, "B":1, "C":2} },
	            ui: { create_fl:true } }

	  numb_a: { class:number, in: { in0:menu_a.out }, ui: { create_fl:true } }

	  menu_b: { class:label_value_list,
	            args:{ cfg_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/spirio_recover.json" }
		    ui: { create_fl:true } }

	  numb_b: { class:number, in: { in0:menu_b.out }, ui: { create_fl:true } }

	  menu_c: { class:label_value_list,
	            args:{ cfg_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/sf_recover.json" }
		    ui: { create_fl:true }}

	  numb_c: { class:number, in: { in0:menu_c.out }, ui: { create_fl:true } }

	}
      }
    }

    ex_05_rt: {
      network: {
        procs: {


	  midi_a: { class:midi_in,  args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 1"} },
	  midi_b: { class:midi_in,  args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 2"} },

	  // switch MIDI off from a particular piano by routing messages to rr_a/b.out0
	  rr_a: { class:recd_route, in:{ in:midi_a.r_out }, args:{ out_cnt:2, select:1, sel_field:"" }  },
	  rr_b: { class:recd_route, in:{ in:midi_b.r_out }, args:{ out_cnt:2, select:1, sel_field:"" }  },

	  sf_a: { class:score_follower_2, in: { in:rr_a.out1 },
	                                args: { score_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_3.csv"},
				          ui: { create_fl:true } }

	  sf_b: { class:score_follower_2, in: { in:rr_b.out1 },
	                                args: { score_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_3.csv"},
				          ui: { create_fl:true } }

	  sf: { class:recd_merge, in:{ in0:sf_a.out0, in1:sf_b.out0 } },


	  spirio_rcvr_menu: { class:label_value_list,
	            args:{ cfg_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/spirio_recover.json" }
		    ui: { create_fl:true } }

	  sf_rcvr_menu: { class:label_value_list,
	            args:{ cfg_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/sf_recover.json" }
		    ui: { create_fl:true }}

	  g_ctl: { class:gutim_ctl, in:{ in:sf.out,
	                                 spirio_recover_id:spirio_rcvr_menu.out,
					 sf_recover_id:sf_rcvr_menu.out
	                               },
	                           args:{ cfg_fname:"/home/kevin/src/currawong/projects/create_cult_event_score/gutim_ctl.json" },
	                           out: { midi_ena_a:rr_a.select, midi_ena_b:rr_b.select
				          sf_a_beg_loc:sf_a.b_loc, sf_a_end_loc:sf_a.e_loc, sf_a_end_loc:sf_a.reset_trigger,
					  sf_b_beg_loc:sf_b.b_loc, sf_b_end_loc:sf_b.e_loc, sf_b_end_loc:sf_b.reset_trigger },
			            ui: { create_fl:true } } 
	
	  spirio_ply: { class:score_player, in: { b_loc:g_ctl.spirio_beg_loc, e_loc:g_ctl.spirio_end_loc, start:g_ctl.spirio_start_fl },
	                                  args: { fname:"/home/kevin/src/currawong/projects/create_cult_event_score/score_cult_evt_20250929_3.csv" },
	  				    ui: { create_fl:true } },

	  mout_b: { class: midi_out, in:{ rin:spirio_ply.out } args:{ dev_label:"MIDIFACE 2x2", port_label:"MIDIFACE 2x2 Midi Out 2" }}

	}
      } 
    }



  } // programs
} // 